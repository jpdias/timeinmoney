package com.toostronk.timeinmoney;

import junit.framework.TestCase;
import junit.framework.AssertionFailedError;
import junit.framework.TestCase;

import java.io.IOException;
import java.io.Serializable;
import java.util.List;

public class SerializationTest extends TestCase {

	  public void testAbstractModuleIsSerializable() throws IOException {
	    Asserts.reserialize(new MyAbstractModule());
	  }
	  static class MyAbstractModule extends AbstractModule implements Serializable {
	    protected void configure() {}
	  }

	  public void testCreationExceptionIsSerializable() throws IOException {
	    assertSimilarWhenReserialized(createCreationException());
	  }

	  private CreationException createCreationException() {
	    try {
	      Guice.createInjector(new AbstractModule() {
	        protected void configure() {
	          bind(List.class);
	        }
	      });
	      throw new AssertionFailedError();
	    } catch (CreationException e) {
	      return e;
	    }
	  }

	  static class A {
	    @Inject B b;
	  }

	  static class B {}
}
